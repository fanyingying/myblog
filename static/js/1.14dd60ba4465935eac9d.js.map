{"version":3,"sources":["webpack:///./src/assets/img/back-icon.svg","webpack:///src/components/Comment.vue","webpack:///./src/components/Comment.vue?745d","webpack:///./src/components/Comment.vue","webpack:///src/components/AddComment.vue","webpack:///./src/components/AddComment.vue?7fc4","webpack:///./src/components/AddComment.vue","webpack:///src/views/BlogDetail.vue","webpack:///./src/views/BlogDetail.vue?1106","webpack:///./src/views/BlogDetail.vue"],"names":["module","exports","Comment","body_html","body","html_url","_this","this","renderMarkdown","components_Comment","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","openGitHub","attrs","src","comment","user","avatar_url","_v","_s","login","$moment","created_at","format","domProps","innerHTML","renderedMarkdown","staticRenderFns","src_components_Comment","__webpack_require__","normalizeComponent","AddComment","String","computed","extends_default","Object","vuex_esm","methods","newComment","$queryParse","code","hash","replacedUrl","access_token","_this2","data","_this3","fetchAccessToken","components_AddComment","class","isWrite","accessToken","href","loginLink","_e","directives","name","rawName","value","expression","disabled","rows","placeholder","input","target","composing","commentBtnDisabled","addComment","AddComment_normalizeComponent","ssrContext","label","getComments","commentContainer","clientHeight","issue","number","_this4","getIssue","views_BlogDetail","title","_l","key","id","style","backgroundColor","color","setActiveLabel","back","ref","commentsUrl","comments_url","addCommentSuccess","handleAddCommentSuccess","BlogDetail_Component","BlogDetail_normalizeComponent","BlogDetail","__webpack_exports__"],"mappings":"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","file":"static/js/1.14dd60ba4465935eac9d.js","sourcesContent":["module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDE4IDEyIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTS0zLTZoMjR2MjRILTN6Ii8+CiAgICAgICAgPHBhdGggZmlsbD0iIzRCNTk1RiIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTggNUgzLjgzbDMuNTgtMy41OUw2IDAgMCA2bDYgNiAxLjQxLTEuNDFMMy44MyA3SDE4eiIvPgogICAgPC9nPgo8L3N2Zz4K\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/back-icon.svg\n// module id = MVI7\n// module chunks = 1","<template>\n  <div class=\"comment\">\n    <div class=\"comment-title\">\n      <div @click=\"openGitHub()\">\n        <img :src=\"comment.user.avatar_url\">\n        <span>{{comment.user.login}}</span>\n      </div>\n      <span class=\"time\">{{$moment(comment.created_at).format('YYYY-MM-DD HH:mm')}}</span>\n    </div>\n    <article class=\"comment-body markdown-body\" v-html=\"renderedMarkdown\"/>\n  </div>\n</template>\n<script>\n  export default {\n    data () {\n      return {\n        renderedMarkdown: ''\n      }\n    },\n    props: ['comment'],\n    methods: {\n      renderMarkdown () {\n        this.renderedMarkdown = ''\n        if (this.comment.body_html) {\n          this.renderedMarkdown = this.comment.body_html\n        } else if (this.comment.body) {\n          this.renderedMarkdown = this.$marked(this.comment.body)\n        }\n      },\n      openGitHub () {\n        window.open(this.comment.user.html_url)\n      }\n    },\n    mounted () {\n      this.$nextTick(() => {\n        this.renderMarkdown()\n      })\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Comment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"comment-title\"},[_c('div',{on:{\"click\":function($event){_vm.openGitHub()}}},[_c('img',{attrs:{\"src\":_vm.comment.user.avatar_url}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.comment.user.login))])]),_vm._v(\" \"),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.$moment(_vm.comment.created_at).format('YYYY-MM-DD HH:mm')))])]),_vm._v(\" \"),_c('article',{staticClass:\"comment-body markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.renderedMarkdown)}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56c179a2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Comment.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Comment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Comment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56c179a2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Comment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Comment.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"add-comment-container\">\n    <div class=\"tab-container\">\n      <ul>\n        <li @click=\"isWrite = true\" :class=\"isWrite ? 'active' : ''\">Write</li>\n        <li @click=\"renderMarkdown\" :class=\"isWrite ? '' : 'active'\">Preview</li>\n      </ul>\n      <div v-if=\"accessToken == null\">\n        <a :href=\"loginLink\">Login</a>&nbsp;with GitHub\n      </div>\n    </div>\n    <textarea :disabled=\"accessToken == null\" v-if=\"isWrite\" rows=\"5\" v-model=\"newComment\"\n              placeholder=\"说点什么？「支持 MarkDown 语法」\"/>\n    <article v-else class=\"markdown-body\" v-html=\"renderedMarkdown\"/>\n    <button :disabled=\"commentBtnDisabled\" @click=\"addComment\" class=\"add-comment-btn\">Comment\n    </button>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .add-comment-container {\n    display: flex;\n    flex-direction: column;\n    border-radius: 4px;\n    border: solid 1px #eeeeee;\n    margin: 30px 0;\n    .tab-container {\n      padding: 0 10px;\n      border-bottom: solid 1px #eeeeee;\n      background-color: #f9fafc;\n      display: flex;\n      ul {\n        margin-top: 8px;\n        list-style: none;\n        display: flex;\n        flex-grow: 1;\n        margin-right: 10px;\n      }\n      li {\n        padding: 10px;\n        font-size: 14px;\n        cursor: pointer;\n        margin-bottom: -1px;\n        color: #586069;\n        user-select: none;\n      }\n\n      li.active {\n        color: #24292e;\n        background-color: #ffffff;\n        border-top-left-radius: 4px;\n        border-top-right-radius: 4px;\n        border-top: solid 1px #eeeeee;\n        border-left: solid 1px #eeeeee;\n        border-right: solid 1px #eeeeee;\n      }\n\n      div {\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        user-select: none;\n        a {\n          color: #2196F3;\n          &:hover {\n            text-decoration: underline;\n          }\n        }\n      }\n    }\n\n    textarea {\n      margin: 10px;\n      border-radius: 3px;\n      padding: 15px 30px 15px 15px;\n      border: solid 1px #eeeeee;\n      background-color: #ffffff;\n      font-size: 14px;\n      color: #4b595f;\n      outline: none;\n      &:disabled {\n        cursor: not-allowed;\n      }\n    }\n\n    .markdown-body {\n      margin: 15px;\n      min-height: 107px;\n    }\n\n    .add-comment-btn {\n      cursor: pointer;\n      user-select: none;\n      margin: 0 15px 15px 0;\n      border-radius: 4px;\n      float: right;\n      background-color: #34d058;\n      color: #ffffff;\n      align-self: flex-end;\n      padding: 8px 12px;\n      font-size: 14px;\n      font-weight: 600;\n      line-height: 20px;\n      white-space: nowrap;\n      vertical-align: middle;\n      user-select: none;\n      border: none;\n      outline: none;\n      &:hover {\n        background-color: #34c058;\n      }\n      &:disabled {\n        background-color: #94d3a2;\n        cursor: not-allowed;\n      }\n    }\n  }\n\n  .width-match-parent-btn {\n    cursor: pointer;\n    user-select: none;\n    margin: 30px 0px;\n    height: 50px;\n    line-height: 50px;\n    text-align: center;\n    border-radius: 4px;\n    font-size: 16px;\n    background-color: #eff7ff;\n    color: #3593f2;\n    &:hover {\n      background-color: #3593f2;\n      color: #ffffff;\n    }\n  }\n\n\n</style>\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n\n  export default {\n    props: {\n      commentsUrl: {\n        type: String,\n        required: true\n      }\n    },\n    data () {\n      return {\n        isWrite: true,\n        newComment: null,\n        renderedMarkdown: '',\n        isCommitting: false\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'accessToken',\n        'loginLink'\n      ]),\n      commentBtnDisabled () {\n        return this.accessToken == null || this.isCommitting || this.newComment == null || this.newComment.trim().length === 0\n      }\n    },\n    methods: {\n      ...mapActions([\n        'setAccessToken',\n        'setTokenUser'\n      ]),\n      renderMarkdown () {\n        this.renderedMarkdown = 'Nothing to preview'\n        if (this.newComment) {\n          this.renderedMarkdown = this.$marked(this.newComment)\n        }\n        this.isWrite = false\n      },\n      fetchAccessToken () {\n        const query = this.$queryParse()\n        if (query.code) {\n          const code = query.code\n          delete query.code\n          const replacedUrl = `${window.location.origin}${window.location.pathname}${this.$queryStringify(query)}${window.location.hash}`\n          history.replaceState(null, null, replacedUrl)\n\n          this.$gitHubApi.getAccessToken(this, code).then(response => {\n            if (response.data && response.data.access_token) {\n              this.setAccessToken(response.data.access_token)\n            }\n          })\n        }\n      },\n      addComment () {\n        this.isCommitting = true\n        this.$gitHubApi.addComment(this, this.commentsUrl, this.newComment.trim()).then(response => {\n          if (response.data && response.data) {\n            this.$emit('addCommentSuccess', response.data)\n            this.isWrite = true\n            this.newComment = null\n            this.renderedMarkdown = ''\n            this.isCommitting = false\n          }\n        }).catch((error) => {\n          this.isCommitting = false\n          if (error.response && error.response.status === 401) {\n            this.setAccessToken(null)\n          }\n        })\n      }\n    },\n    mounted () {\n      this.$nextTick(() => {\n        this.fetchAccessToken()\n      })\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AddComment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-comment-container\"},[_c('div',{staticClass:\"tab-container\"},[_c('ul',[_c('li',{class:_vm.isWrite ? 'active' : '',on:{\"click\":function($event){_vm.isWrite = true}}},[_vm._v(\"Write\")]),_vm._v(\" \"),_c('li',{class:_vm.isWrite ? '' : 'active',on:{\"click\":_vm.renderMarkdown}},[_vm._v(\"Preview\")])]),_vm._v(\" \"),(_vm.accessToken == null)?_c('div',[_c('a',{attrs:{\"href\":_vm.loginLink}},[_vm._v(\"Login\")]),_vm._v(\" with GitHub\\n    \")]):_vm._e()]),_vm._v(\" \"),(_vm.isWrite)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newComment),expression:\"newComment\"}],attrs:{\"disabled\":_vm.accessToken == null,\"rows\":\"5\",\"placeholder\":\"说点什么？「支持 MarkDown 语法」\"},domProps:{\"value\":(_vm.newComment)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newComment=$event.target.value}}}):_c('article',{staticClass:\"markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.renderedMarkdown)}}),_vm._v(\" \"),_c('button',{staticClass:\"add-comment-btn\",attrs:{\"disabled\":_vm.commentBtnDisabled},on:{\"click\":_vm.addComment}},[_vm._v(\"Comment\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f154bd6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AddComment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f154bd6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddComment.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddComment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddComment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f154bd6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddComment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f154bd6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AddComment.vue\n// module id = null\n// module chunks = ","<template>\n  <div v-if=\"issue\" class=\"blog-detail-container\">\n    <div class=\"title-container\">\n      <span class=\"title\">{{issue.title}}</span>\n      <ul>\n        <li class=\"tag tag-small\" v-for=\"label in issue.labels\" :key=\"label.id\" @click=\"setActiveLabel(label)\"\n            :style=\"{ backgroundColor: '#' + label.color}\">{{label.name}}\n        </li>\n      </ul>\n      <span class=\"back\" @click=\"back\">\n        <img src=\"../assets/img/back-icon.svg\"\n             class=\"back-icon\">返回\n      </span>\n    </div>\n    <div class=\"comment-container bga-back-top\" ref=\"commentContainer\">\n      <comment :comment=\"issue\"/>\n      <comment v-for=\"comment in comments\" :key=\"comment.id\" :comment=\"comment\"/>\n      <add-comment :commentsUrl=\"issue.comments_url\" @addCommentSuccess=\"handleAddCommentSuccess\"/>\n    </div>\n  </div>\n</template>\n<script>\n  import { mapActions } from 'vuex'\n  import Comment from '../components/Comment.vue'\n  import AddComment from '../components/AddComment.vue'\n\n  export default{\n    data () {\n      return {\n        issue: null,\n        number: null,\n        comments: [],\n        newComment: null\n      }\n    },\n    components: {Comment, AddComment},\n    methods: {\n      ...mapActions([\n        'updateActiveLabel'\n      ]),\n      setActiveLabel (label) {\n        this.updateActiveLabel(label)\n        this.$router.push('/')\n      },\n      getComments () {\n        if (this.issue && this.issue.comments > 0) {\n          this.$gitHubApi.getComments(this, this.issue.comments_url).then(response => {\n            this.comments = response.data\n          })\n        }\n      },\n      getIssue () {\n        this.$gitHubApi.getIssue(this, this.number).then(response => {\n          this.issue = response.data\n          this.getComments()\n        })\n      },\n      back () {\n        this.$router.go(-1)\n      },\n      handleAddCommentSuccess (comment) {\n        this.comments.push(comment)\n        this.$nextTick(() => {\n          // 如果这里不加个 setTimeout 的话，Comment 数量太多时不会自动滚动到底部\n          setTimeout(() => {\n            let commentContainer = this.$refs.commentContainer\n            commentContainer.scrollTop = commentContainer.scrollHeight - commentContainer.clientHeight\n          }, 16)\n        })\n      }\n    },\n    created () {\n      if (this.$route.params.issue) {\n        this.issue = this.$route.params.issue\n      } else {\n        if (this.$route.params.number) {\n          this.number = this.$route.params.number\n        } else {\n          this.$router.replace('/')\n        }\n      }\n    },\n    mounted () {\n      this.$nextTick(() => {\n        if (this.issue) {\n          this.getComments()\n        } else {\n          this.getIssue()\n        }\n      })\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/BlogDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.issue)?_c('div',{staticClass:\"blog-detail-container\"},[_c('div',{staticClass:\"title-container\"},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.issue.title))]),_vm._v(\" \"),_c('ul',_vm._l((_vm.issue.labels),function(label){return _c('li',{key:label.id,staticClass:\"tag tag-small\",style:({ backgroundColor: '#' + label.color}),on:{\"click\":function($event){_vm.setActiveLabel(label)}}},[_vm._v(_vm._s(label.name)+\"\\n      \")])})),_vm._v(\" \"),_c('span',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('img',{staticClass:\"back-icon\",attrs:{\"src\":require(\"../assets/img/back-icon.svg\")}}),_vm._v(\"返回\\n    \")])]),_vm._v(\" \"),_c('div',{ref:\"commentContainer\",staticClass:\"comment-container bga-back-top\"},[_c('comment',{attrs:{\"comment\":_vm.issue}}),_vm._v(\" \"),_vm._l((_vm.comments),function(comment){return _c('comment',{key:comment.id,attrs:{\"comment\":comment}})}),_vm._v(\" \"),_c('add-comment',{attrs:{\"commentsUrl\":_vm.issue.comments_url},on:{\"addCommentSuccess\":_vm.handleAddCommentSuccess}})],2)]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-52f3283a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/BlogDetail.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52f3283a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./BlogDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/BlogDetail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}